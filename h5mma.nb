(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 7.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[     15997,        483]
NotebookOptionsPosition[     13836,        406]
NotebookOutlinePosition[     14348,        428]
CellTagsIndexPosition[     14263,        423]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{"SetDirectory", "[", "\"\</Users/barry/Research/Code\>\"", 
  "]"}]], "Input",
 CellChangeTimes->{{3.4929516574062233`*^9, 3.492951675677423*^9}, 
   3.492951759677071*^9}],

Cell[BoxData["\<\"/Users/barry/Research/Code\"\>"], "Output",
 CellChangeTimes->{{3.492951668503448*^9, 3.4929516762647142`*^9}, 
   3.492951760373918*^9, 3.493012490614328*^9, 3.493012539531595*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{"<<", "h5mma`"}]], "Input",
 CellChangeTimes->{{3.490511229646881*^9, 3.490511234727852*^9}}],

Cell[TextData[{
 "Check that we are using the ",
 StyleBox["MathLink",
  FontSlant->"Italic"],
 " executable:"
}], "Text",
 CellChangeTimes->{{3.490529860073649*^9, 3.4905298682725887`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Options", "[", "ImportHDF5", "]"}]], "Input",
 CellChangeTimes->{{3.4905253521248703`*^9, 3.49052535790469*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"h5mmaMathLink", "\[Rule]", "True"}], "}"}]], "Output",
 CellChangeTimes->{
  3.490525358502397*^9, 3.49052542163416*^9, 3.4905256240110283`*^9, {
   3.4905262750937023`*^9, 3.4905262940064163`*^9}, 3.4905268018741407`*^9, 
   3.490527637881537*^9, 3.4905277072060223`*^9, 3.490528267544304*^9, 
   3.490529531437243*^9, 3.4905296960374517`*^9, 3.490529766473404*^9, {
   3.4905298115098877`*^9, 3.490529827103351*^9}, 3.492951765397154*^9, 
   3.493012350969564*^9, 3.493012492856119*^9, 3.493012541987927*^9}]
}, Open  ]],

Cell["Available functions", "Text",
 CellChangeTimes->{{3.490529909296783*^9, 3.490529928150577*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"??", "h5mma`*"}]], "Input",
 CellChangeTimes->{{3.490527640404723*^9, 3.490527645172875*^9}}],

Cell[BoxData[
 DynamicModuleBox[{Typeset`open$$ = True}, 
  PaneSelectorBox[{False->
   RowBox[{
    OpenerBox[Dynamic[Typeset`open$$],
     ImageSize->Small], 
    StyleBox["h5mma`", "InfoHeading"]}], True->GridBox[{
     {
      RowBox[{
       OpenerBox[Dynamic[Typeset`open$$],
        ImageSize->Small], 
       StyleBox["h5mma`", "InfoHeading"]}]},
     {GridBox[{
        {
         ButtonBox["h5mmaMathLink",
          BaseStyle->"InformationLinkLF",
          ButtonData:>{"Info3493019743-4305778", {"h5mmaMathLink", "h5mma`"}},
          
          ButtonNote->"h5mma`"], 
         ButtonBox["ImportHDF5",
          BaseStyle->"InformationLinkLF",
          ButtonData:>{"Info3493019743-4305778", {"ImportHDF5", "h5mma`"}},
          ButtonNote->"h5mma`"]}
       },
       DefaultBaseStyle->"InfoGrid",
       GridBoxItemSize->{"Columns" -> {{
            Scaled[0.475]}}}]}
    },
    GridBoxAlignment->{"Columns" -> {{Left}}, "Rows" -> {{Baseline}}}]}, 
   Dynamic[Typeset`open$$],
   ImageSize->Automatic]]], "Print", "InfoCell",
 CellChangeTimes->{3.493012543573615*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"?", "ImportHDF5"}]], "Input",
 CellChangeTimes->{{3.490529878768306*^9, 3.490529882185398*^9}}],

Cell[BoxData[
 StyleBox["\<\"ImportHDF5[\\\"file\\\"] imports data from an HDF5 file, \
returning a complete \
\!\(\*\\nStyleBox[\\\"Mathematica\\\",\\nFontSlant->\\\"Italic\\\"]\) version \
of it.\\nImportHDF5[\\\"file\\\", \!\(\*\\nStyleBox[\\\"elements\\\", \
\\\"TI\\\"]\)] imports the specified elements from a file.\"\>", 
  "MSG"]], "Print", "PrintUsage",
 CellChangeTimes->{3.493012544232327*^9},
 CellTags->"Info3493019744-7700420"]
}, Open  ]],

Cell["Example", "Text",
 CellChangeTimes->{{3.490529932118734*^9, 3.490529933126587*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"file", "=", "\"\<h5mma/phi.0.xy.h5\>\""}], ";"}]], "Input",
 CellChangeTimes->{{3.4899366138854847`*^9, 3.489936623699217*^9}, {
  3.4905267612156076`*^9, 3.490526762646985*^9}}],

Cell["\<\
With no extra arguments, we just list the datasets in the file\
\>", "Text",
 CellChangeTimes->{{3.49052998318314*^9, 3.490529998956534*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"datasets", "=", 
   RowBox[{"ImportHDF5", "[", "file", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.4905280543067102`*^9, 3.490528066874321*^9}, 
   3.490529539923633*^9, {3.4905301163225737`*^9, 3.490530119201985*^9}, {
   3.49053014940202*^9, 3.4905301548175793`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "datasets", "]"}]], "Input",
 CellChangeTimes->{{3.490530125482334*^9, 3.490530156824959*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{"\<\"/CTGBASE::phi it=0 tl=0 m=0 rl=0 c=0\"\>", ",", 
    RowBox[{"\[LeftSkeleton]", "137", "\[RightSkeleton]"}], 
    ",", "\<\"/CTGBASE::phi it=0 tl=0 m=0 rl=5 c=8\"\>"}], "}"}],
  Short]], "Output",
 CellChangeTimes->{3.490530135666057*^9, 3.492951771474258*^9, 
  3.493012361547171*^9}]
}, Open  ]],

Cell["We can also specify which datasets to import:", "Text",
 CellChangeTimes->{{3.490530012724098*^9, 3.490530021348151*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"someData", "=", 
   RowBox[{"ImportHDF5", "[", 
    RowBox[{"file", ",", 
     RowBox[{"{", 
      RowBox[{"\"\<Datasets\>\"", ",", 
       RowBox[{"{", 
        RowBox[{
        "\"\</CTGBASE::phi it=0 tl=0 m=0 rl=0 c=0\>\"", ",", 
         "\"\</CTGBASE::phi it=0 tl=0 m=0 rl=0 c=1\>\""}], "}"}]}], "}"}]}], 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.490525430830884*^9, 3.490525436581707*^9}, {
  3.490525822429739*^9, 3.490525848309379*^9}, {3.490527719859448*^9, 
  3.4905277255177298`*^9}, {3.4905278675598707`*^9, 3.490527876893983*^9}, {
  3.490527960724666*^9, 3.490527976746708*^9}, {3.490528069873969*^9, 
  3.4905280722412157`*^9}, {3.490528174927672*^9, 3.49052817734136*^9}, {
  3.490528255900537*^9, 3.4905282757705107`*^9}, {3.4905301462520943`*^9, 
  3.490530159634848*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "someData", "]"}]], "Input",
 CellChangeTimes->{{3.490530160501569*^9, 3.4905301638765907`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0.9853526022944306`", ",", "0.9852043715410528`", ",", 
        RowBox[{"\[LeftSkeleton]", "95", "\[RightSkeleton]"}], ",", 
        "0.9852043436365806`", ",", "0.985352575104176`"}], "}"}], ",", 
      RowBox[{"\[LeftSkeleton]", "69", "\[RightSkeleton]"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"\[LeftSkeleton]", "19", "\[RightSkeleton]"}], ",", 
        RowBox[{"\[LeftSkeleton]", "97", "\[RightSkeleton]"}], ",", 
        RowBox[{"\[LeftSkeleton]", "19", "\[RightSkeleton]"}]}], "}"}]}], 
     "}"}], ",", 
    RowBox[{"\[LeftSkeleton]", "1", "\[RightSkeleton]"}]}], "}"}],
  Short]], "Output",
 CellChangeTimes->{3.490530164288288*^9, 3.492951950267725*^9, 
  3.49301236484373*^9}]
}, Open  ]],

Cell["Or just import them all:", "Text",
 CellChangeTimes->{{3.490530026901299*^9, 3.490530030971431*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"allData", "=", 
   RowBox[{"ImportHDF5", "[", 
    RowBox[{"file", ",", 
     RowBox[{"{", "\"\<Data\>\"", "}"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.490525430830884*^9, 3.490525436581707*^9}, {
  3.490525822429739*^9, 3.490525848309379*^9}, {3.490527719859448*^9, 
  3.4905277255177298`*^9}, {3.4905278675598707`*^9, 3.490527876893983*^9}, {
  3.490527960724666*^9, 3.490527976746708*^9}, {3.490528069873969*^9, 
  3.4905280722412157`*^9}, {3.490528174927672*^9, 3.49052817734136*^9}, {
  3.490528255900537*^9, 3.4905282757705107`*^9}, {3.490528478235928*^9, 
  3.490528483195321*^9}, {3.490530168034965*^9, 3.490530171136965*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "allData", "]"}]], "Input",
 CellChangeTimes->{{3.490530172722789*^9, 3.490530175488544*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0.9853526022944306`", ",", "0.9852043715410528`", ",", 
        RowBox[{"\[LeftSkeleton]", "95", "\[RightSkeleton]"}], ",", 
        "0.9852043436365806`", ",", "0.985352575104176`"}], "}"}], ",", 
      RowBox[{"\[LeftSkeleton]", "70", "\[RightSkeleton]"}]}], "}"}], ",", 
    RowBox[{"\[LeftSkeleton]", "137", "\[RightSkeleton]"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"\[LeftSkeleton]", "1", "\[RightSkeleton]"}], "}"}], ",", 
      RowBox[{"\[LeftSkeleton]", "30", "\[RightSkeleton]"}]}], "}"}]}], "}"}],
  
  Short]], "Output",
 CellChangeTimes->{3.490530176681718*^9, 3.492951952887806*^9, 
  3.493012372205903*^9}]
}, Open  ]],

Cell[TextData[{
 "We can also import the attributes (annotations in ",
 StyleBox["Mathematica",
  FontSlant->"Italic"],
 "'s language)"
}], "Text",
 CellChangeTimes->{{3.490530082194151*^9, 3.490530098137845*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"allAttrs", "=", 
   RowBox[{"ImportHDF5", "[", 
    RowBox[{"file", ",", "\"\<Annotations\>\""}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.490529107533399*^9, 3.490529111873212*^9}, {
  3.490529251237857*^9, 3.490529257805688*^9}, {3.4905301948967123`*^9, 
  3.4905302022000837`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "allAttrs", "]"}]], "Input",
 CellChangeTimes->{{3.490530203922567*^9, 3.4905302063834763`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{
    RowBox[{"\[LeftSkeleton]", "1", "\[RightSkeleton]"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\<\"time\"\>", "\[Rule]", "0.`"}], ",", 
      RowBox[{"\<\"timestep\"\>", "\[Rule]", "0"}], ",", 
      RowBox[{"\[LeftSkeleton]", "4", "\[RightSkeleton]"}], ",", 
      RowBox[{"\<\"iorigin\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0"}], "}"}]}]}], "}"}], ",", 
    RowBox[{"\[LeftSkeleton]", "136", "\[RightSkeleton]"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"\<\"time\"\>", "\[Rule]", "0.`"}], ",", 
      RowBox[{"\<\"timestep\"\>", "\[Rule]", "0"}], ",", 
      RowBox[{"\[LeftSkeleton]", "4", "\[RightSkeleton]"}], ",", 
      RowBox[{"\<\"iorigin\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"13024", ",", "12624"}], "}"}]}]}], "}"}]}], "}"}],
  Short]], "Output",
 CellChangeTimes->{3.4905302067606497`*^9, 3.492951954404117*^9, 
  3.493012375197516*^9}]
}, Open  ]],

Cell["And we can get the dimensions of a dataset's data", "Text",
 CellChangeTimes->{{3.4930123861571074`*^9, 3.493012394988605*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"allDims", "=", 
   RowBox[{"ImportHDF5", "[", 
    RowBox[{"file", ",", "\"\<Dimensions\>\""}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.493012398379175*^9, 3.4930124092291613`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "allDims", "]"}]], "Input",
 CellChangeTimes->{{3.493012410483585*^9, 3.493012412926076*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"71", ",", "99"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"71", ",", "99"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"38", ",", "99"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"35", ",", "37"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"36", ",", "37"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"29", ",", "37"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"35", ",", "37"}], "}"}], ",", 
    RowBox[{"\[LeftSkeleton]", "126", "\[RightSkeleton]"}], ",", 
    RowBox[{"{", 
     RowBox[{"32", ",", "34"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"38", ",", "33"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"38", ",", "33"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"32", ",", "33"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"31", ",", "33"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"31", ",", "34"}], "}"}]}], "}"}],
  Short]], "Output",
 CellChangeTimes->{3.493012413852128*^9, 3.49301249964773*^9, 
  3.493012552553774*^9}]
}, Open  ]],

Cell["Finally, we can get the whole lot in one go", "Text",
 CellChangeTimes->{{3.493013609386043*^9, 3.493013616329533*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rules", "=", 
   RowBox[{"ImportHDF5", "[", 
    RowBox[{"file", ",", "\"\<Rules\>\""}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.493012561799562*^9, 3.493012568984702*^9}, {
  3.4930126029779367`*^9, 3.4930126034245863`*^9}, {3.493012667272015*^9, 
  3.4930126683506613`*^9}, {3.4930127503912582`*^9, 3.493012755106142*^9}, {
  3.493013536263772*^9, 3.493013544300663*^9}, {3.493013619762686*^9, 
  3.493013629754871*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Short", "[", "rules", "]"}]], "Input",
 CellChangeTimes->{{3.493013631262555*^9, 3.493013633153777*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{
    RowBox[{"\<\"Annotations\"\>", "\[Rule]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
         RowBox[{"\<\"time\"\>", "\[Rule]", "0.`"}], ",", 
         RowBox[{"\<\"timestep\"\>", "\[Rule]", "0"}], ",", 
         RowBox[{"\[LeftSkeleton]", "4", "\[RightSkeleton]"}], ",", 
         RowBox[{"\<\"iorigin\"\>", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0"}], "}"}]}]}], "}"}], ",", 
       RowBox[{"\[LeftSkeleton]", "138", "\[RightSkeleton]"}]}], "}"}]}], ",", 
    RowBox[{"\[LeftSkeleton]", "2", "\[RightSkeleton]"}], ",", 
    RowBox[{
     RowBox[{"\<\"\"\>", "\[Ellipsis]", "\<\"\"\>"}], "\[Rule]", 
     RowBox[{"\[LeftSkeleton]", "1", "\[RightSkeleton]"}]}]}], "}"}],
  Short]], "Output",
 CellChangeTimes->{3.493013634317968*^9}]
}, Open  ]]
},
WindowSize->{640, 540},
WindowMargins->{{12, Automatic}, {Automatic, 0}},
ShowSelection->True,
FrontEndVersion->"7.0 for Mac OS X x86 (32-bit) (November 10, 2008)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "Info3493019744-7700420"->{
  Cell[3507, 112, 441, 8, 78, "Print",
   CellTags->"Info3493019744-7700420"]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"Info3493019744-7700420", 14160, 417}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 195, 4, 27, "Input"],
Cell[765, 28, 199, 2, 27, "Output"]
}, Open  ]],
Cell[979, 33, 116, 2, 27, "Input"],
Cell[1098, 37, 190, 6, 26, "Text"],
Cell[CellGroupData[{
Cell[1313, 47, 136, 2, 27, "Input"],
Cell[1452, 51, 550, 9, 27, "Output"]
}, Open  ]],
Cell[2017, 63, 101, 1, 26, "Text"],
Cell[CellGroupData[{
Cell[2143, 68, 117, 2, 27, "Input"],
Cell[2263, 72, 1085, 31, 54, "Print"]
}, Open  ]],
Cell[CellGroupData[{
Cell[3385, 108, 119, 2, 27, "Input"],
Cell[3507, 112, 441, 8, 78, "Print",
 CellTags->"Info3493019744-7700420"]
}, Open  ]],
Cell[3963, 123, 89, 1, 26, "Text"],
Cell[4055, 126, 213, 4, 27, "Input"],
Cell[4271, 132, 151, 3, 26, "Text"],
Cell[4425, 137, 308, 6, 27, "Input"],
Cell[CellGroupData[{
Cell[4758, 147, 131, 2, 27, "Input"],
Cell[4892, 151, 340, 8, 43, "Output"]
}, Open  ]],
Cell[5247, 162, 127, 1, 26, "Text"],
Cell[5377, 165, 836, 18, 58, "Input"],
Cell[CellGroupData[{
Cell[6238, 187, 133, 2, 27, "Input"],
Cell[6374, 191, 826, 20, 43, "Output"]
}, Open  ]],
Cell[7215, 214, 106, 1, 26, "Text"],
Cell[7324, 217, 681, 12, 27, "Input"],
Cell[CellGroupData[{
Cell[8030, 233, 130, 2, 27, "Input"],
Cell[8163, 237, 776, 20, 43, "Output"]
}, Open  ]],
Cell[8954, 260, 213, 6, 26, "Text"],
Cell[9170, 268, 326, 7, 27, "Input"],
Cell[CellGroupData[{
Cell[9521, 279, 133, 2, 27, "Input"],
Cell[9657, 283, 973, 24, 43, "Output"]
}, Open  ]],
Cell[10645, 310, 133, 1, 26, "Text"],
Cell[10781, 313, 224, 5, 27, "Input"],
Cell[CellGroupData[{
Cell[11030, 322, 130, 2, 27, "Input"],
Cell[11163, 326, 1047, 33, 43, "Output"]
}, Open  ]],
Cell[12225, 362, 125, 1, 26, "Text"],
Cell[12353, 365, 465, 9, 27, "Input"],
Cell[CellGroupData[{
Cell[12843, 378, 128, 2, 27, "Input"],
Cell[12974, 382, 846, 21, 43, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
